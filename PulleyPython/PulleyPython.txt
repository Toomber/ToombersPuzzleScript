title Pulley Python
author Toomber
homepage www.puzzlescript.net

key_repeat_interval 0.12

========
OBJECTS
========

Background
GREEN(
11111
01111
11101
11111
10111)


Wall
BROWN DARKBROWN
00010
11111
01000
11111
00010

HeadUp
Blue Red White
..0..
.000.
00000
00000
1...2

HeadDown
Blue Red White
2...1
00000
00000
.000.
..0..

HeadRight
Blue Red White
100..
.000.
.0000
.000.
200..

HeadLeft
Blue Red White
..002
.000.
0000.
.000.
..001


HeadWentUp
transparent
..0..
.000.
00000
.....
.....

HeadWentDown
transparent
.....
.....
00000
.000.
..0..

HeadWentRight
transparent
..0..
..00.
..000
..00.
..0..

HeadWentLeft
transparent
..0..
.00..
000..
.00..
..0..


LRibbonUp
Red
00000
.....
.....
.....
.....


LRibbonDown
Red
.....
.....
.....
.....
00000


LRibbonRight
Red
....0
....0
....0
....0
....0


LRibbonLeft
Red
0....
0....
0....
0....
0....



RRibbonUp
White
00000
.....
.....
.....
.....


RRibbonDown
White
.....
.....
.....
.....
00000


RRibbonRight
White
....0
....0
....0
....0
....0


RRibbonLeft
White
0....
0....
0....
0....
0....

TailEndLeft
transparent
00...
.....
.....
.....
.....

TailEndRight
transparent
.....
.....
00...
.....
.....

LeftTemp1
transparent

LeftTemp2
transparent

RightTemp1 
transparent

RightTemp2 
transparent

=======
LEGEND
=======

. = Background
# = Wall
H = HeadUp

Head = HeadUp or HeadDown or HeadRight or HeadLeft
Player = Head

HeadWent = HeadWentUp or HeadWentDown or HeadWentRight or HeadWentLeft

U = HeadWentUp
D = HeadWentDown
R = HeadWentRight
L = HeadWentLeft

K = LRibbonLeft and RRibbonRight and HeadWentUp
X = LRibbonLeft and RRibbonRight and TailEndLeft and TailEndRight and HeadWentUp

RRibbon = RRibbonUp or RRibbonDown or RRibbonRight or RRibbonLeft
LRibbon = LRibbonUp or LRibbonDown or LRibbonRight or LRibbonLeft
Ribbon = RRibbon or LRibbon

Snake = Head or HeadWent

=======
SOUNDS
=======

================
COLLISIONLAYERS
================


Background

LeftTemp1
LeftTemp2
RightTemp1
RightTemp2
HeadWent
RRibbonUp
RRibbonDown
RRibbonRight
RRibbonLeft
LRibbonUp
LRibbonDown
LRibbonRight
LRibbonLeft
Head, Wall,


TailEndLeft
TailEndRight

======
RULES
======

[Head HeadWent] -> [Head]

[> Head | Ribbon] -> cancel 
[> Head | Wall] -> cancel


[up HeadUp no Ribbon] -> [LRibbonLeft RRibbonRight HeadWentUp LeftTemp1 RightTemp1 up HeadUp] 
[right HeadUp no Ribbon] -> [LRibbonLeft LRibbonUp HeadWentRight LeftTemp2 right HeadRight] 
[left HeadUp no Ribbon] -> [RRibbonRight RRibbonUp HeadWentLeft RightTemp2 left HeadLeft] 

[down HeadDown no Ribbon] -> [LRibbonRight RRibbonLeft HeadWentDown LeftTemp1 RightTemp1 down HeadDown] 
[right HeadDown no Ribbon] -> [RRibbonLeft RRibbonDown HeadWentRight RightTemp2 right HeadRight] 
[left HeadDown no Ribbon] -> [LRibbonRight LRibbonDown HeadWentLeft LeftTemp2 left HeadLeft] 

[right HeadRight no Ribbon] -> [LRibbonUp RRibbonDown HeadWentRight LeftTemp1 RightTemp1 right HeadRight] 
[up HeadRight no Ribbon] -> [RRibbonRight RRibbonDown HeadWentUp RightTemp2 up HeadUp] 
[down HeadRight no Ribbon] -> [LRibbonRight LRibbonUp HeadWentDown LeftTemp2 down HeadDown] 

[left HeadLeft no Ribbon] -> [LRibbonDown RRibbonUp HeadWentLeft LeftTemp1 RightTemp1 left HeadLeft] 
[up HeadLeft no Ribbon] -> [LRibbonDown LRibbonLeft HeadWentUp LeftTemp2 up HeadUp] 
[down HeadLeft no Ribbon] -> [RRibbonLeft RRibbonUp HeadWentDown RightTemp2 down HeadDown] 


startloop

[LeftTemp1][TailEndLeft HeadWentUp LRibbonDown] -> [][TailEndLeft HeadWentUp]
[LeftTemp1][TailEndLeft HeadWentUp LRibbonLeft] -> [][TailEndLeft HeadWentUp]

[LeftTemp1][TailEndLeft HeadWentDown LRibbonUp] -> [][TailEndLeft HeadWentDown]
[LeftTemp1][TailEndLeft HeadWentDown LRibbonRight] -> [][TailEndLeft HeadWentDown]

[LeftTemp1][TailEndLeft HeadWentRight LRibbonLeft] -> [][TailEndLeft HeadWentRight]
[LeftTemp1][TailEndLeft HeadWentRight LRibbonUp] -> [][TailEndLeft HeadWentRight]

[LeftTemp1][TailEndLeft HeadWentLeft LRibbonRight] -> [][TailEndLeft HeadWentLeft]
[LeftTemp1][TailEndLeft HeadWentLeft LRibbonDown] -> [][TailEndLeft HeadWentLeft]



[LeftTemp2][TailEndLeft HeadWentUp LRibbonDown] -> [LeftTemp1][TailEndLeft HeadWentUp]
[LeftTemp2][TailEndLeft HeadWentUp LRibbonLeft] -> [LeftTemp1][TailEndLeft HeadWentUp]

[LeftTemp2][TailEndLeft HeadWentDown LRibbonUp] -> [LeftTemp1][TailEndLeft HeadWentDown]
[LeftTemp2][TailEndLeft HeadWentDown LRibbonRight] -> [LeftTemp1][TailEndLeft HeadWentDown]

[LeftTemp2][TailEndLeft HeadWentRight LRibbonLeft] -> [LeftTemp1][TailEndLeft HeadWentRight]
[LeftTemp2][TailEndLeft HeadWentRight LRibbonUp] -> [LeftTemp1][TailEndLeft HeadWentRight]

[LeftTemp2][TailEndLeft HeadWentLeft LRibbonRight] -> [LeftTemp1][TailEndLeft HeadWentLeft]
[LeftTemp2][TailEndLeft HeadWentLeft LRibbonDown] -> [LeftTemp1][TailEndLeft HeadWentLeft]



[RightTemp1][TailEndRight HeadWentUp RRibbonDown] -> [][TailEndRight HeadWentUp]
[RightTemp1][TailEndRight HeadWentUp RRibbonRight] -> [][TailEndRight HeadWentUp]

[RightTemp1][TailEndRight HeadWentDown RRibbonUp] -> [][TailEndRight HeadWentDown]
[RightTemp1][TailEndRight HeadWentDown RRibbonLeft] -> [][TailEndRight HeadWentDown]

[RightTemp1][TailEndRight HeadWentRight RRibbonLeft] -> [][TailEndRight HeadWentRight]
[RightTemp1][TailEndRight HeadWentRight RRibbonDown] -> [][TailEndRight HeadWentRight]

[RightTemp1][TailEndRight HeadWentLeft RRibbonRight] -> [][TailEndRight HeadWentLeft]
[RightTemp1][TailEndRight HeadWentLeft RRibbonUp] -> [][TailEndRight HeadWentLeft]



[RightTemp2][TailEndRight HeadWentUp RRibbonDown] -> [RightTemp1][TailEndRight HeadWentUp]
[RightTemp2][TailEndRight HeadWentUp RRibbonRight] -> [RightTemp1][TailEndRight HeadWentUp]

[RightTemp2][TailEndRight HeadWentDown RRibbonUp] -> [RightTemp1][TailEndRight HeadWentDown]
[RightTemp2][TailEndRight HeadWentDown RRibbonLeft] -> [RightTemp1][TailEndRight HeadWentDown]

[RightTemp2][TailEndRight HeadWentRight RRibbonLeft] -> [RightTemp1][TailEndRight HeadWentRight]
[RightTemp2][TailEndRight HeadWentRight RRibbonDown] -> [RightTemp1][TailEndRight HeadWentRight]

[RightTemp2][TailEndRight HeadWentLeft RRibbonRight] -> [RightTemp1][TailEndRight HeadWentLeft]
[RightTemp2][TailEndRight HeadWentLeft RRibbonUp] -> [RightTemp1][TailEndRight HeadWentLeft]



up [HeadWentUp TailEndLeft no LRibbon | ] -> [HeadWentUp | TailEndLeft]
down [HeadWentDown TailEndLeft no LRibbon | ] -> [HeadWentDown | TailEndLeft]
right [HeadWentRight TailEndLeft no LRibbon | ] -> [HeadWentRight | TailEndLeft]
left [HeadWentLeft TailEndLeft no LRibbon | ] -> [HeadWentLeft | TailEndLeft]

up [HeadWentUp TailEndRight no RRibbon | ] -> [HeadWentUp | TailEndRight]
down [HeadWentDown TailEndRight no RRibbon | ] -> [HeadWentDown | TailEndRight]
right [HeadWentRight TailEndRight no RRibbon | ] -> [HeadWentRight | TailEndRight]
left [HeadWentLeft TailEndRight no RRibbon | ] -> [HeadWentLeft | TailEndRight]


endloop

(
[ | down Head] -> [down HeadDown] 
[ | right Head] -> [right HeadRight] 
[ | left Head] -> [left HeadLeft] )

==============
WINCONDITIONS
==============


=======
LEVELS
=======


############
#..........#
#..........#
#..........#
#.........h#
#...#.....k#
#.........k#
#.........k#
#.........k#
#.........x#
#..........#
#..........#
############
